
@begin
include "main.h"
@end

// === constants and definitions ===============================================

const char *test_name = "libparser_cll_test";

const char *test_names[] =
{/*{{{*/
  "finite_automata_create",
  "inverted_index_create",
  "inverted_index_remove",
  "inverted_index_dump",
  "fa_states_recognize",
  "fa_states_dot_code",
  "parser_create",
};/*}}}*/

test_function_t test_functions[] =
{/*{{{*/
  test_finite_automata_create,
  test_inverted_index_create,
  test_inverted_index_remove,
  test_inverted_index_dump,
  test_fa_states_recognize,
  test_fa_states_dot_code,
  test_parser_create,
};/*}}}*/

// === methods of generated structures =========================================

// === test execution functions ================================================

void test_finite_automata_create()
{/*{{{*/
  CONT_INIT_CLEAR(parser_fa_s,fa);
  string_array_s reg_exps = {3,3,(string_s[]){
    STRING_S("\"Ahoj\""),
    STRING_S("\"Hello\""),
    STRING_S("\"Bonjour\""),
  }};

  cassert(parser_fa_s_create(&fa,&reg_exps) == 0);

  char *input = "BonjourHelloAhojBonjourHelloAhoj";
  unsigned input_len = strlen(input);

  CONT_INIT_CLEAR(ui_array_s,terminals);

  unsigned input_idx = 0;
  do {
    unsigned terminal = parser_fa_s_recognize(&fa,input,&input_idx,input_len);
    if (terminal == c_idx_not_exist) { break; }
    ui_array_s_push(&terminals,terminal);
  } while(1);

  ui_array_s reference = {6,6,(unsigned[]){2,1,0,2,1,0}};
  cassert(ui_array_s_compare(&terminals,&reference));
}/*}}}*/

void test_inverted_index_create()
{/*{{{*/
  CONT_INIT_CLEAR(file_s,file);
  cassert(file_s_open(&file,"tests/libparser_cll_test/resources/lorem.txt","r") == 0);

  CONT_INIT_CLEAR(bc_array_s,buffer);
  cassert(file_s_read_close(&file,&buffer) == 0);
  bc_array_s_push(&buffer,'\0');

  CONT_INIT_CLEAR(fa_states_array_s,states_array);
  CONT_INIT_CLEAR(reg_parser_s,reg_parser);
  CONT_INIT_CLEAR(string_s,regexp);
  CONT_INIT_CLEAR(string_array_s,words);

  // - retrieve words from file -
  {
    char *ptr = buffer.data;
    char *ptr_end = ptr + buffer.used;

    do {
      char *start = ptr;
      ptr = strchrnul(ptr,'\n');

      if (*ptr == '\0') { break; }

      string_s_set_format(&regexp,"\"%.*s\"",ptr - start,start);

      string_array_s_push_blank(&words);
      string_s_set(string_array_s_last(&words),ptr - start,start);

      ++ptr;

      cassert(reg_parser_s_process_reg_exp(&reg_parser,&regexp,0));

      fa_states_array_s_push_blank(&states_array);
      fa_states_s_swap(fa_states_array_s_last(&states_array),&reg_parser.states);
    } while(ptr < ptr_end);
  }

  CONT_INIT_CLEAR(inverted_index_s,inverted_index);
  inverted_index_s_update(&inverted_index,&states_array);
  states_array.used = 0;

  // FIXME
  //DEBUG_PRINT_LINES(string_array_s,&words);
  //DEBUG_PRINT_LINES(fa_states_s,&inverted_index.states);
  //DEBUG_PRINT_LINES(ui_tree_array_s,&inverted_index.targets);

  string_array_s reg_exps = {3,3,(string_s[]){
    STRING_S("\"augue\""),
    STRING_S("\"sollicitudin\""),
    STRING_S("\"euismod\""),
  }};

  string_s *re_ptr = reg_exps.data;
  string_s *re_ptr_end = re_ptr + reg_exps.used;
  do {
    cassert(reg_parser_s_process_reg_exp(&reg_parser,re_ptr,1));

    fa_states_array_s_push_blank(&states_array);
    fa_states_s_swap(fa_states_array_s_last(&states_array),&reg_parser.states);
  } while(++re_ptr < re_ptr_end);

  unsigned idx = 0;
  do {
    inverted_index_s_update(&inverted_index,&states_array);
  } while(++idx < 1);

  // FIXME
  //DEBUG_PRINT_LINES(fa_states_s,&inverted_index.states);
  //DEBUG_PRINT_LINES(ui_tree_array_s,&inverted_index.targets);

  CONT_INIT_CLEAR(finite_automata_s,fa);
  fa_states_s_swap(&fa.states,&inverted_index.states);
  finite_automata_s_moves_from_states(&fa);

  CONT_INIT_CLEAR(ui_array_s,tokens);

  if (words.used != 0)
  {
    string_s *w_ptr = words.data;
    string_s *w_ptr_end = w_ptr + words.used;
    do {
      unsigned index = 0;
      unsigned token = finite_automata_s_recognize(&fa,w_ptr->data,&index,w_ptr->size - 1);
      ui_array_s_push(&tokens,token);
    } while(++w_ptr < w_ptr_end);
  }

  unsigned reference[] =
  {/*{{{*/
    54, 63, 60, 26, 32, 192, 187, 37, 14, 27, 115, 42, 24, 154, 89, 51, 116, 42,
    0, 58, 197, 123, 116, 49, 85, 190, 127, 42, 145, 38, 181, 26, 32, 134, 88,
    144, 79, 172, 127, 47, 36, 152, 111, 134, 65, 22, 117, 192, 38, 94, 194, 63,
    5, 129, 47, 45, 7, 75, 53, 10, 38, 78, 63, 196, 191, 190, 161, 69, 69, 83,
    117, 60, 136, 24, 57, 87, 94, 135, 22, 68, 10, 197, 136, 94, 79, 35, 8, 183,
    21, 8, 10, 145, 170, 67, 13, 48, 46, 21, 77, 172, 169, 22, 21, 88, 114, 117,
    40, 0, 161, 106, 139, 36, 101, 19, 111, 166, 25, 7, 43, 179, 171, 164, 196,
    69, 3, 75, 83, 181, 2, 3, 63, 22, 87, 192, 148, 12, 5, 60, 112, 126, 46, 78,
    41, 118, 115, 52, 7, 102, 38, 29, 48, 19, 86, 110, 39, 0, 168, 63, 57, 77,
    33, 172, 132, 33, 48, 86, 132, 43, 81, 168, 24, 65, 27, 189, 186, 12, 102,
    21, 44, 166, 132, 5, 3, 8, 54, 63, 60, 26, 32, 192, 187, 37, 28, 0, 172, 66,
    30, 154, 91, 42, 26, 32, 127, 65, 167, 36, 13, 27, 193, 17, 195, 106, 75, 24,
    88, 85, 101, 14, 192, 116, 34, 22, 136, 68, 116, 48, 55, 22, 74, 67, 80, 5,
    86, 39, 22, 121, 38, 1, 44, 8, 182, 12, 67, 10, 142, 162, 39, 30, 160, 62,
    86, 129, 148, 30, 78, 183, 46, 55, 185, 75, 78, 63, 84, 22, 136, 17, 181,
    140, 116, 170, 17, 36, 132, 19, 142, 142, 195, 146, 70, 182, 156, 6, 72, 6,
    177, 61, 3, 109, 122, 2, 86, 39, 6, 42, 86, 9, 170, 68, 150, 79, 22, 148, 73,
    10, 86, 8, 30, 103, 76, 22, 128, 144, 60, 67, 192, 63, 5, 144, 63, 88, 27,
    46, 140, 103, 167, 74, 29, 182, 11, 0, 183, 126, 16, 60, 172, 19, 107, 181,
    73, 45, 10, 16, 112, 134, 102, 161, 160, 174, 79, 123, 166, 37, 2, 91, 73,
    27, 17, 172, 27, 182, 88, 181, 114, 191, 38, 22, 166, 98, 113, 9, 154, 105,
    48, 148, 44, 190, 21, 129, 105, 155, 181, 11, 79, 196, 62, 3, 182, 116, 13,
    168, 64, 0, 25, 148, 166, 57, 144, 166, 25, 117, 197, 77, 149, 36, 28, 21,
    47, 39, 55, 161, 65, 89, 196, 196, 40, 101, 48, 140, 183, 106, 102, 24, 74,
    11, 103, 26, 32, 140, 152, 168, 17, 26, 32, 115, 2, 129, 94, 22, 39, 165, 6,
    179, 34, 182, 14, 123, 183, 67, 181, 107, 190, 133, 51, 78, 47, 12, 68, 144,
    155, 81, 11, 68, 158, 24, 170, 6, 179, 5, 38, 139, 36, 171, 68, 56, 27, 35,
    0, 89, 153, 128, 112, 0, 108, 77, 113, 3, 94, 109, 113, 106, 189, 106, 55,
    128, 8, 5, 126, 101, 102, 77, 145, 60, 24, 136, 49, 89, 22, 73, 186, 101,
    136, 75, 113, 179, 102, 0, 37, 152, 0, 123, 43, 117, 186, 24, 185, 19, 190,
    115, 183, 122, 28, 189, 40, 27, 148, 181, 51, 154, 87, 71, 10, 101, 46, 153,
    0, 13, 74, 71, 0, 60, 167, 167, 190, 47, 65, 174, 3, 33, 6, 141, 134, 38, 13,
    21, 93, 34, 14, 170, 34, 24, 11, 191, 149, 14, 3, 41, 165, 161, 16, 98, 141,
    44, 29, 103, 102, 73, 149, 148, 45, 129, 22, 81, 78, 87, 22, 25, 118, 182,
    195, 27, 137, 38, 9, 145, 62, 80, 11, 102, 130, 6, 158, 3, 168, 9, 68, 80,
    24, 16, 78, 87, 165, 101, 26, 32, 24, 87, 111, 26, 32, 158, 19, 6, 170, 45,
    55, 12, 102, 12, 68, 121, 171, 21, 26, 32, 60, 195, 146, 70, 182, 156, 6, 72,
    6, 177, 61, 3, 109, 122, 30, 165, 88, 7, 124, 93, 16, 64, 179, 65, 134, 172,
    87, 89, 9, 19, 114, 9, 172, 67, 14, 169, 83, 68, 48, 167, 45, 122, 5, 1, 137,
    34, 3, 124, 148, 29, 153, 117, 169, 2, 7, 162, 39, 24, 169, 102, 52, 26, 32,
    11, 45, 53, 74, 46, 5, 16, 101, 144, 113, 121, 76, 135, 60, 196, 170, 160,
    45, 95, 56, 158, 193, 88, 48, 145, 42, 167, 161, 2, 155, 118, 42, 5, 191, 13,
    145, 5, 89, 48, 137, 79, 42, 68, 153, 26, 32, 132, 10, 184, 135, 38, 28, 103,
    3, 68, 21, 85, 139, 116, 41, 7, 108, 123, 26, 32, 174, 89, 168, 14, 91, 117,
    108, 5, 115, 52, 38, 71, 181, 5, 89, 27, 172, 135, 16, 56, 196, 49, 3, 185,
    194, 51, 88, 45, 171, 21, 158, 3, 91, 6, 35, 1, 10, 8, 75, 55, 21, 161, 33,
    79, 152, 71, 5, 181, 196, 53, 27, 75, 165, 118, 76, 27, 167, 25, 28, 115, 26,
    32, 60, 7, 176, 56, 7, 109, 78, 94, 182, 149, 50, 82, 104, 157, 4, 90, 159,
    23, 119, 97, 23, 147, 175, 81, 0, 148, 94, 81, 24, 37, 44, 57, 194, 171, 35,
    6, 189, 55, 76, 43, 192, 9, 141, 9, 125, 24, 76, 13, 24, 71, 103, 93, 43, 78,
    167, 71, 55, 78, 137, 41, 48, 160, 8, 190, 10, 150, 69, 163, 145, 89, 0, 86,
    132, 55, 27, 25, 3, 49, 132, 161, 3, 177, 60, 51, 26, 32, 8, 102, 55, 0, 16,
    76, 57, 148, 8, 109, 7, 86, 44, 172, 22, 13, 134, 34, 12, 124, 137, 66, 109,
    91, 105, 48, 194, 67, 58, 24, 39, 14, 48, 41, 46, 1, 38, 42, 98, 78, 124, 74,
    129, 78, 34, 28, 85, 40, 68, 22, 193, 66, 124, 0, 56, 136, 66, 36, 44, 123,
    194, 55, 155, 185, 44, 168, 181, 75, 196, 21, 186, 12, 75, 123, 98, 105, 0,
    86, 42, 13, 179, 185, 49, 179, 185, 13, 7, 172, 43, 81, 6, 65, 115, 116, 25,
    22, 150, 67, 111, 78, 127, 44, 51, 36, 153, 67, 9, 101, 19, 2, 12, 33, 26,
    32, 37, 142, 145, 48, 36, 60, 1, 18, 173, 99, 143, 111, 39, 162, 163, 48, 83,
    25, 14, 160, 33, 22, 162, 155, 113, 169, 116, 94, 78, 179, 13, 172, 19, 78,
    137, 134, 44, 63, 144, 77, 48, 115, 42, 38, 10, 89, 111, 177, 43, 36, 109,
    179, 123, 21, 0, 39, 112, 27, 162, 69, 48, 116, 39, 30, 76, 45, 121, 48, 118,
    24, 142, 21, 68, 51, 3, 75, 21, 33, 172, 91, 80, 132, 35, 5, 8, 124, 74, 140,
    185, 152, 37, 78, 191, 45, 181, 27, 28, 122, 7, 37, 22, 101, 164, 170, 121,
    40, 127, 85, 1, 8, 63, 168, 110, 126, 36, 124, 10, 76, 30, 193, 62, 3, 69,
    141, 86, 57, 107, 105, 0, 39, 134, 36, 194, 73, 84, 55, 149, 89, 48, 130,
    126, 41, 76, 160, 43, 21, 166, 108, 39, 10, 34, 57, 43, 65, 184, 12, 129,
    179, 172, 9, 108, 139, 101, 84, 148, 29, 192, 40, 39, 21, 126, 11, 182, 24,
    186, 26, 32, 58, 136, 177, 71, 21, 122, 25, 13, 142, 67, 177, 160, 39, 3,
    127, 43, 14, 168, 84, 62, 78, 134, 108, 148, 3, 113, 194, 38, 27, 8, 103,
    182, 56, 101, 150, 152, 53, 154, 44, 95, 150, 43, 5, 154, 42, 140, 95, 35, 0,
    192, 137, 55, 24, 89, 83, 130, 25, 125, 118, 60, 111, 185, 94, 78, 116, 170,
    164, 24, 170, 60, 78, 181, 109, 139, 0, 37, 42, 112, 68, 87, 149, 6, 154, 78,
    184, 24, 41, 2, 191, 21, 37, 6, 191, 51, 9, 182, 75, 52, 6, 181, 17, 51, 197,
    172, 109, 10, 162, 76, 103, 5, 29, 130, 170, 64, 5, 136, 29, 0, 102, 9, 35,
    197, 150, 12, 3, 17, 50, 82, 104, 157, 4, 90, 159, 23, 119, 97, 23, 147, 175,
    186, 142, 88, 12, 37, 132, 155, 1, 24, 93, 37, 30, 103, 44, 48, 107, 125, 43,
    34, 160, 87, 26, 32, 127, 69, 75, 24, 87, 80, 135, 37, 6, 16, 107, 85, 81,
    122, 9, 44, 36, 132, 79, 172, 102, 58, 0, 152, 35, 148, 21, 1, 21, 42, 3, 35,
    132, 152, 29, 24, 125, 94, 13, 128, 42, 5, 109, 98, 118, 195, 146, 70, 182,
    156, 6, 72, 6, 177, 61, 3, 109, 122, 163, 21, 94, 3, 16, 194, 118, 26, 32,
    149, 60, 51, 3, 40, 48, 41, 162, 168, 0, 9, 109, 30, 183, 25, 22, 128, 128,
    195, 27, 76, 49, 195, 9, 98, 77, 54, 63, 60, 26, 32, 192, 187, 37, 186, 33,
    63, 100, 10, 145, 46, 91, 6, 160, 132, 120, 59, 111, 142, 85, 83, 112, 22,
    141, 38, 139, 137, 154, 64, 21, 165, 35, 183, 9, 164, 36, 91, 75, 139, 24,
    89, 8, 164, 166, 43, 7, 134, 174, 14, 162, 37, 26, 32, 89, 172, 106, 106, 43,
    122, 1, 12, 181, 17, 7, 128, 63, 186, 21, 108, 184, 62, 192, 174, 51, 116,
    126, 116, 28, 154, 48, 105, 7, 130, 56, 179, 134, 41, 3, 74, 75, 84, 21, 163,
    154, 109, 3, 73, 134, 193, 2, 8, 102, 165, 26, 32, 153, 6, 177, 27, 8, 112,
    21, 94, 46, 81, 172, 123, 38, 3, 170, 113, 142, 166, 83, 80, 172, 75, 78, 47,
    121, 9, 118, 109, 184, 138, 6, 177, 61, 3, 33, 63, 100, 10, 145, 195, 10, 95,
    45, 111, 176, 87, 27, 137, 124, 44, 47, 153, 109, 27, 197, 63, 87, 7, 33,
    139, 137, 174, 60, 12, 194, 89, 84, 9, 57, 154, 93, 42, 21, 121, 81, 0, 74,
    19, 51, 109, 68, 197, 172, 17, 78, 196, 125, 105, 186, 130, 17, 9, 89, 123,
    181, 111, 103, 137, 193, 28, 36, 46, 75, 81, 5, 116, 38, 14, 167, 68, 94, 48,
    191, 62, 179, 21, 30, 78, 68, 148, 144, 60, 7, 181, 66, 111, 182, 177, 87, 6,
    103, 88, 158, 6, 14, 132, 71, 36, 142, 191, 14, 182, 65, 12, 106, 110, 190,
    34, 87, 132, 5, 91, 24, 197, 26, 32, 71, 163, 142, 102, 3, 181, 127, 140, 9,
    19, 27, 65, 191, 150, 13, 0, 83, 88, 53, 7, 117, 89, 111, 19, 94, 106, 26,
    32, 47, 189, 197, 129, 43, 51, 174, 65, 73, 21, 124, 66, 93, 78, 30, 153,
    162, 91, 31, 110, 131, 178, 6, 92, 15, 188, 96, 151, 180, 20, 14, 45, 105,
    144, 22, 123, 36, 189, 24, 37, 164, 5, 108, 103, 49, 93, 106, 36, 48, 47,
    112, 107, 102, 27, 191, 193, 195, 146, 70, 182, 156, 6, 72, 6, 177, 61, 3,
    109, 122, 114, 167, 74, 75, 7, 91, 52, 27, 60, 44, 163, 181, 48, 88, 0, 91,
    186, 196, 181, 68, 36, 152, 56, 174, 73, 71, 48, 144, 89, 84, 0, 81, 84, 88,
    40, 9, 153, 65, 134, 26, 32, 14, 91, 125, 67, 36, 177, 163, 9, 33, 39, 114,
    12, 17, 26, 32, 77, 132, 160, 13, 152, 123, 86, 80, 74, 19, 38, 24, 115, 33,
    161, 26, 32, 30, 21, 62, 24, 68, 98, 145, 27, 6, 64, 55, 107, 62, 22, 58,
    182, 166, 164, 142, 43, 0, 35, 116, 12, 115, 42, 148, 163, 21, 170, 105, 112,
    123, 41, 10, 183, 181, 16, 87, 165, 102, 3, 107, 43, 46, 123, 38, 30, 7, 43,
    165, 74, 88, 9, 121, 49, 164, 121, 34, 5, 103, 106, 163, 24, 177, 69, 190,
    12, 49, 135, 182, 63, 36, 196, 71, 13, 34, 64, 132, 5, 16, 12, 179, 130, 89,
    113, 85, 161, 73, 78, 155, 30, 179, 5, 37, 124, 74, 13, 167, 11, 27, 44, 129,
    7, 162, 19, 101, 113, 130, 34, 19, 128, 160, 69, 184, 36, 81, 7, 150, 47, 14,
    6, 46, 24, 88, 150, 83, 2, 183, 155, 60, 78, 117, 75, 83, 7, 113, 122, 108,
    6, 62, 141, 7, 95, 40, 154, 14, 125, 58, 78, 71, 167, 189, 186, 136, 167, 62,
    0, 130, 67, 167, 48, 57, 38, 66, 183, 7, 135, 27, 123, 3, 11, 111, 124, 65,
    24, 123, 177, 195, 85, 47, 9, 110, 197, 63, 109, 83, 71, 27, 86, 108, 25, 9,
    68, 57, 193, 69, 58, 21, 101, 37, 197, 0, 52, 26, 32, 77, 24, 66, 126, 177,
    5, 171, 60, 195, 36, 37, 108, 14, 101, 60, 10, 181, 166, 113, 7, 197, 42, 14,
    10, 158, 75, 79, 9, 65, 6, 60, 177, 185, 53, 170, 154, 68, 7, 177, 75, 110,
    192, 14, 145, 174, 108, 0, 160, 56, 6, 44, 35, 190, 101, 116, 33, 5, 158, 45,
    141, 48, 195, 16, 35, 117, 22, 68, 9, 135, 179, 87, 79, 101, 116, 106, 79,
    160, 91, 19, 13, 60, 68, 130, 48, 105, 48, 130, 182, 44, 14, 24, 184, 38,
    111, 10, 184, 66, 30, 6, 179, 65, 186, 33, 63, 100, 10, 145, 46, 91, 6, 160,
    132, 120, 59, 111, 26, 32, 153, 47, 113, 48, 47, 167, 183, 73, 21, 152, 8,
    139, 196, 17, 6, 98, 196, 52, 24, 47, 33, 14, 24, 125, 35, 163, 63, 64, 185,
    26, 32, 62, 7, 110, 117, 65, 53, 161, 37, 3, 185, 196, 76, 60, 176, 17, 26,
    32, 121, 37, 60, 48, 88, 29, 48, 122, 102, 9, 117, 39, 30, 117, 176, 155,
    190, 133, 13, 153, 108, 12, 132, 135, 55, 78, 155, 94, 190, 83, 71, 153, 101,
    11, 48, 158, 40, 186, 168, 60, 7, 148, 126, 186, 33, 63, 100, 10, 145, 46,
    91, 6, 160, 132, 120, 59, 164, 21, 58, 0, 35, 145, 91, 27, 6, 49, 114, 75,
    41, 160, 9, 37, 22, 171, 174, 8, 81, 125, 109, 10, 105, 115, 5, 118, 44, 174,
    79, 10, 88, 21, 71, 117, 137, 163, 155, 174, 33, 162, 192, 73, 177, 12, 139,
    0, 155, 38, 113, 166, 87, 16, 3, 141, 77, 132, 10, 1, 6, 117, 108, 1, 9, 67,
    7, 38, 193, 84, 53, 7, 63, 87, 14, 134, 68, 9, 11, 193, 6, 176, 44, 158, 195,
    152, 166, 193, 13, 7, 130, 44, 57, 48, 126, 62, 186, 145, 165, 189, 164, 27,
    76, 155, 144, 49, 6, 118, 45, 113, 102, 73, 196, 78, 44, 3, 98, 194, 102, 29,
    184, 62, 126, 166, 118, 42, 109, 182, 73, 36, 148, 46, 38, 12, 38, 29, 12,
    102, 3, 68, 170, 197, 3, 7, 58, 111, 98, 11, 27, 124, 189, 68, 39, 197, 25,
    12, 149, 17, 69, 21, 89, 30, 161, 73, 48, 160, 144, 41, 37, 149, 105, 21,
    170, 65, 109, 22, 40, 195, 146, 70, 182, 156, 6, 72, 6, 177, 61, 3, 109, 122,
    52, 0, 46, 69, 14, 124, 34, 3, 141, 193, 37, 19, 103, 87, 48, 153, 64, 64,
    26, 32, 66, 81, 136, 71, 12, 33, 145, 103, 186, 118, 129, 181, 28, 85, 89, 7,
    17, 122, 27, 153, 8, 182, 29, 22, 174, 105, 114, 12, 11, 46, 186, 192, 34, 6,
    145, 144, 69, 75, 116, 109, 22, 161, 37, 38, 10, 33, 164, 137, 24, 64, 0,
    118, 57, 26, 32, 39, 3, 47, 148, 118, 52, 181, 24, 108, 6, 158, 52, 127, 126,
    43, 7, 130, 164, 48, 11, 75, 186, 101, 193, 37, 21, 158, 51, 128, 19, 12,
    105, 192, 134, 1, 27, 109, 11, 186, 6, 116, 109, 27, 171, 69, 164, 101, 45,
    22, 183, 181, 34, 19, 137, 47, 9, 152, 16, 39, 7, 87, 114, 88, 11, 148, 78,
    141, 48, 85, 22, 40, 186, 185, 66, 121, 37, 148, 12, 134, 64, 137, 29, 169,
    39, 12, 142, 128, 25, 64, 110, 25, 36, 95, 41, 64, 6, 8, 186, 129, 75, 12,
    182, 136, 75, 109, 125, 11, 0, 145, 16, 102, 24, 109, 80, 149, 48, 109, 24,
    125, 190, 35, 76, 176, 78, 160, 27, 181, 27, 102, 164, 12, 94, 98, 148, 88,
    24, 160, 39, 2, 19, 66, 194, 115, 87, 12, 121, 115, 25, 111, 39, 162, 56,
    129, 94, 6, 35, 161, 129, 111, 115, 46, 7, 75, 115, 132, 138, 6, 177, 61, 3,
    33, 63, 100, 10, 145, 1, 18, 173, 99, 143, 2, 176, 26, 32, 8, 22, 194, 190,
    39, 68, 149, 22, 169, 12, 101, 26, 32, 34, 2, 98, 161, 193, 163, 12, 68, 171,
    85, 38, 26, 32, 98, 8, 112, 184, 150, 183, 163, 134, 11, 78, 192, 128, 164,
    118, 63, 192, 132, 109, 6, 193, 8, 14, 74, 44, 10, 185, 106, 14, 132, 47, 75,
    0, 150, 76, 141, 21, 52, 135, 134, 64, 9, 103, 14, 78, 75, 44, 56, 48, 160,
    63, 140, 48, 181, 89, 1, 150, 73, 60, 7, 142, 88, 197, 78, 13, 117, 77, 3,
    118, 128, 40, 69, 123, 19, 36, 149, 19, 8, 0, 33, 111, 109, 69, 191, 21, 165,
    5, 181, 48, 64, 57, 47, 102, 84, 135, 37, 22, 106, 137, 58, 113, 22, 44, 12,
    87, 118, 161, 22, 22, 43, 164, 158, 130, 46, 29, 116, 38, 71, 21, 182, 43,
    194, 27, 190, 127, 116, 34, 195, 128, 105, 5, 39, 121, 194, 28, 145, 161, 47,
    10, 181, 40, 148, 78, 81, 45, 77, 167, 12, 117, 10, 184, 5, 75, 2, 84, 117,
    145, 139, 132, 84, 181, 51, 37, 64, 86, 103, 94, 3, 152, 95, 39, 28, 9, 77,
    86, 174, 17, 27, 169, 33, 113, 142, 35, 6, 74, 103, 1, 26, 32, 141, 8, 140,
    27, 87, 22, 87, 130, 117, 136, 9, 19, 56, 26, 32, 94, 124, 161, 37, 9, 170,
    34, 113, 98, 67, 36, 105, 126, 179, 111, 25, 41, 126, 21, 107, 9, 137, 21,
    105, 52, 36, 62, 169, 37, 149, 130, 36, 21, 108, 186, 12, 43, 160, 153, 58,
    24, 115, 33, 140, 12, 35, 22, 73, 134, 142, 12, 26, 32, 44, 190, 25, 44, 117,
    7, 170, 48, 179, 0, 67, 14, 170, 168, 69, 26, 32, 126, 13, 150, 66, 26, 32,
    76, 165, 3, 115, 63, 128, 13, 107, 194, 11, 22, 168, 34, 134, 7, 163, 3, 149,
    75, 21, 106, 44, 79, 109, 87, 93, 36, 183, 48, 185, 21, 47, 113, 27, 45, 65,
    53, 6, 69, 35, 186, 33, 63, 100, 10, 145, 46, 91, 6, 160, 132, 120, 59, 190,
    26, 32, 167, 40, 10, 189, 33, 14, 174, 16, 9, 8, 158, 6, 181, 44, 181, 140,
    73, 65, 101, 22, 19, 78, 169, 115, 34, 52, 106, 16, 149, 197, 144, 51, 12,
    44, 196, 182, 65, 3, 130, 88, 190, 133, 113, 6, 154, 89, 186, 24, 8, 10, 73,
    150, 107, 48, 10, 34, 53, 48, 69, 5, 65, 170, 124, 14, 10, 49, 84, 137, 39,
    12, 115, 58, 195, 146, 70, 182, 156, 6, 72, 6, 177, 61, 3, 109, 122, 164, 22,
    17, 5, 35, 153, 158, 3, 6, 8, 111, 103, 69, 76, 5, 167, 88, 118, 22, 139,
    118, 63, 0, 162, 122, 75, 75, 107, 76, 27, 181, 17, 77, 7, 39, 56, 125, 134,
    75, 3, 122, 80, 84, 45, 162, 148, 62, 27, 106, 75, 186, 169, 49, 9, 74, 134,
    34, 42, 153, 46, 48, 128, 44, 108, 5, 69, 190, 93, 191, 88, 22, 181, 87, 196,
    26, 32, 163, 65, 71, 136, 9, 169, 22, 123, 91, 58, 51, 26, 32, 181, 49, 186,
    26, 32, 107, 109, 91, 170, 38, 138, 6, 177, 61, 3, 33, 63, 100, 10, 145, 28,
    106, 35, 36, 41, 152, 142, 53, 25, 45, 174, 167, 161, 24, 91, 78, 8, 139,
    145, 132, 177, 114, 68, 105, 103, 22, 83, 181, 141, 7, 11, 80, 78, 46, 63,
    52, 83, 150, 75, 9, 144, 2, 17, 58, 170, 24, 63, 7, 129, 177, 16, 113, 169,
    36, 71, 22, 121, 13, 21, 132, 47, 2, 22, 102, 127, 135, 68, 9, 132, 46, 30,
    121, 24, 47, 36, 160, 139, 144, 126, 19, 24, 116, 25, 125, 5, 51, 153, 144,
    116, 114, 171, 40, 9, 185, 93, 1, 128, 107, 33, 12, 194, 62, 158, 48, 114,
    22, 33, 45, 79, 33, 69, 141, 36, 197, 26, 32, 103, 182, 87, 56, 160, 108, 10,
    68, 116, 161, 112, 192, 184, 47, 24, 167, 52, 162, 65, 48, 76, 136, 118, 113,
    115, 38, 6, 167, 166, 45, 34, 118, 46, 6, 142, 63, 67, 5, 43, 190, 189, 172,
    193, 1, 7, 122, 87, 36, 149, 33, 53, 197, 37, 12, 34, 155, 7, 85, 17, 85, 81,
    171, 26, 32, 8, 48, 170, 186, 194, 145, 11, 6, 86, 55, 192, 69, 12, 35, 189,
    27, 110, 75, 149, 30, 91, 25, 88, 21, 137, 105, 91, 93, 1, 18, 173, 99, 143,
    79, 184, 34, 27, 73, 126, 12, 129, 68, 149, 140, 36, 40, 75, 112, 153, 46,
    37, 21, 132, 71, 84, 26, 32, 190, 36, 124, 87, 55, 76, 76, 149, 10, 43, 7,
    83, 118, 11, 164, 127, 167, 124, 114, 5, 49, 142, 165, 71, 3, 142, 58, 51,
    48, 77, 117, 160, 102, 36, 141, 62, 112, 106, 127, 87, 27, 166, 79, 10, 89,
    109, 79, 121, 77, 3, 134, 85, 47, 19, 155, 71, 0, 153, 65, 94, 24, 38, 13,
    21, 76, 153, 130, 58, 115, 185, 19, 13, 160, 98, 65, 24, 135, 25, 145, 9, 81,
    76, 42, 169, 27, 174, 78, 176, 7, 105, 2, 77, 8, 116, 36, 43, 27, 153, 194,
    63, 1, 21, 66, 181, 95, 34, 26, 32, 150, 39, 163, 145, 129, 38, 0, 130, 29,
    39, 42, 150, 22, 42, 27, 91, 166, 11, 139, 174, 19, 22, 160, 83, 75, 62, 154,
    44, 5, 136, 47, 37, 36, 49, 13, 168, 17, 78, 98, 137, 30, 194, 181, 64, 10,
    93, 67, 74, 6, 51, 149, 38, 9, 64, 192, 26, 32, 84, 94, 144, 163, 153, 66,
    39, 0, 153, 16, 95, 10, 139, 144, 102, 16, 3, 86, 65, 191, 26, 32, 2, 9, 116,
    45, 1, 75, 45, 160, 6, 83, 22, 183, 9, 77, 140, 8, 58, 171, 22, 73, 27, 107,
    174, 89, 138, 6, 177, 61, 3, 33, 63, 100, 10, 145, 164, 12, 58, 26, 32, 64,
    176, 141, 13, 106, 192, 102, 3, 158, 14, 36, 66, 78, 46, 170, 170, 27, 196,
    37, 29, 10, 130, 19, 51, 117, 11, 27, 73, 103, 184, 91, 38, 123, 51, 192, 64,
    36, 171, 172, 47, 43, 194, 41, 36, 174, 87, 64, 22, 41, 139, 24, 128, 41, 5,
    128, 25, 14, 36, 197, 60, 9, 134, 71, 30, 62, 77, 84, 5, 85, 84, 184, 36, 39,
    13, 21, 98, 44, 190, 130, 36, 19, 27, 121, 80, 153, 196, 64, 22, 123, 14, 93,
    197, 62, 21, 144, 14, 127, 65, 78, 73, 160, 27, 110, 41, 153, 112, 165, 177,
    44, 98, 116, 49, 193, 0, 29, 74, 42, 22, 74, 155, 138, 6, 177, 61, 3, 33, 63,
    100, 10, 145, 28, 60, 75, 166, 26, 32, 33, 27, 174, 106, 19, 114, 78, 40, 33,
    139, 3, 41, 17, 111, 65, 37, 124, 7, 49, 189, 193, 117, 76, 52, 67, 41, 106,
    48, 75, 10, 189, 136, 62, 57, 105, 88, 141, 0, 116, 21, 168, 24, 39, 114,
    124, 40, 5, 108, 149, 122, 195, 161, 41, 21, 87, 91, 27, 184, 35, 158, 51,
    27, 108, 89, 79, 168, 64, 60, 186, 24, 45, 26, 32, 37, 128, 170, 13, 78, 25,
    10, 65, 152, 181, 14, 118, 76, 26, 32, 38, 124, 115, 57, 179, 38, 46, 24,
    136, 47, 176, 22, 29, 123, 45, 167, 170, 160, 44, 87, 161, 71, 22, 168, 75,
    75, 26, 32, 60, 113, 117, 49, 130, 171, 108, 6, 196, 39, 164, 121, 167, 45,
    189, 86, 55, 155, 44, 47, 3, 129, 38, 181, 5, 80, 3, 172, 109, 21, 141, 49,
    190, 102, 25, 166, 7, 76, 6, 155, 91, 77, 186, 6, 16, 34, 13, 78, 35, 193,
    153, 37, 26, 32, 93, 37, 14, 116, 45, 110, 33, 174, 7, 107, 46, 110, 51, 12,
    17, 49, 29, 192, 12, 89, 161, 130, 57, 179, 117, 182, 139, 181, 95, 42, 6,
    127, 195, 146, 70, 182, 156, 6, 72, 6, 177, 61, 3, 109, 122, 195, 158, 170,
    108, 48, 192, 65, 132, 106, 79, 22, 127, 33, 26, 32, 148, 102, 114, 19, 67,
    110, 12, 118, 5, 128, 21, 62, 13, 22, 69, 45, 56, 130, 77, 5, 73, 123, 36,
    103, 49, 160, 164, 6, 60, 108, 81, 124, 71, 65, 27, 95, 66, 172, 22, 51, 109,
    38, 126, 78, 17, 7, 83, 176, 108, 52, 17, 64, 181, 10, 152, 21, 176, 7, 58,
    140, 43, 65, 137, 10, 44, 93, 130, 106, 41, 53, 166, 45, 78, 109, 160, 179,
    57, 83, 142, 8, 6, 155, 51, 184, 69, 58, 5, 74, 38, 160, 182, 114, 10, 155,
    105, 78, 162, 89
  };/*}}}*/

  cassert(tokens.used == sizeof(reference)/sizeof(unsigned));
  cassert(memcmp(tokens.data,reference,sizeof(reference)) == 0);
}/*}}}*/

void test_inverted_index_remove()
{/*{{{*/
  CONT_INIT_CLEAR(fa_states_array_s,states_array);
  CONT_INIT_CLEAR(reg_parser_s,reg_parser);
  CONT_INIT_CLEAR(inverted_index_s,inverted_index);

  string_array_s reg_exps = {4,4,(string_s[]){
    STRING_S("\"augue\""),
    STRING_S("\"sollicitudin\""),
    STRING_S("\"sollic\".\"it\"*.\"udin\""),
    STRING_S("\"euismod\""),
  }};

  string_s *re_ptr = reg_exps.data;
  string_s *re_ptr_end = re_ptr + reg_exps.used;
  do {
    cassert(reg_parser_s_process_reg_exp(&reg_parser,re_ptr,re_ptr - reg_exps.data));

    fa_states_array_s_push_blank(&states_array);
    fa_states_s_swap(fa_states_array_s_last(&states_array),&reg_parser.states);
  } while(++re_ptr < re_ptr_end);

  inverted_index_s_update(&inverted_index,&states_array);

  CONT_INIT_CLEAR(ui_array_s,targets);
  ui_array_s_push(&targets,0);
  ui_array_s_push(&targets,1);
  //ui_array_s_push(&targets,2);
  //ui_array_s_push(&targets,3);

  inverted_index_s_remove_targets(&inverted_index,&targets);

  // FIXME
  //DEBUG_PRINT_LINES(fa_states_s,&inverted_index.states);
  //DEBUG_PRINT_LINES(ui_tree_array_s,&inverted_index.targets);

#if OPTION_TO_STRING == ENABLED
  const char *inputs[] = {
    "sollicudin",
    "sollicitudin",
    "euismod"
  };

  const char *outputs[] = {
    "[2]",
    "[2]",
    "[3]"
  };

  CONT_INIT_CLEAR(bc_array_s,buffer);

  unsigned io_idx = 0;
  unsigned io_idx_cnt = sizeof(inputs)/sizeof(const char *);
  do {
    const char *input = inputs[io_idx];
    unsigned input_idx = 0;
    unsigned token = fa_states_s_recognize(&inverted_index.states,input,&input_idx,strlen(input));

    buffer.used = 0;
    ui_tree_s_to_string(ui_tree_array_s_at(&inverted_index.targets,token),&buffer);
    bc_array_s_push(&buffer,'\0');
    cassert(strcmp(buffer.data,outputs[io_idx]) == 0);
  } while(++io_idx < io_idx_cnt);
#endif
}/*}}}*/

void test_inverted_index_dump()
{/*{{{*/
  CONT_INIT_CLEAR(fa_states_array_s,states_array);
  CONT_INIT_CLEAR(reg_parser_s,reg_parser);
  CONT_INIT_CLEAR(inverted_index_s,inverted_index);

  string_array_s reg_exps = {4,4,(string_s[]){
    STRING_S("\"augue\""),
    STRING_S("\"sollicitudin\""),
    STRING_S("\"sollic\".\"it\"*.\"udin\""),
    STRING_S("\"euismod\""),
  }};

  string_s *re_ptr = reg_exps.data;
  string_s *re_ptr_end = re_ptr + reg_exps.used;
  do {
    cassert(reg_parser_s_process_reg_exp(&reg_parser,re_ptr,re_ptr - reg_exps.data));

    fa_states_array_s_push_blank(&states_array);
    fa_states_s_swap(fa_states_array_s_last(&states_array),&reg_parser.states);
  } while(++re_ptr < re_ptr_end);

  inverted_index_s_update(&inverted_index,&states_array);

  // FIXME
  //DEBUG_PRINT_LINES(fa_states_s,&inverted_index.states);
  //DEBUG_PRINT_LINES(ui_tree_array_s,&inverted_index.targets);

  CONT_INIT_CLEAR(ui_array_s,dump);
  inverted_index_s_dump(&inverted_index,&dump);

  // FIXME
  //fprintf(stderr,"dump size: %u\n",dump.used*(ui)sizeof(ui));

  CONT_INIT_CLEAR(inverted_index_s,loaded_index);
  cassert(inverted_index_s_load(&loaded_index,dump.data) == 0);
  cassert(inverted_index_s_compare(&loaded_index,&inverted_index));

  const char *input = "sollicitudin";
  unsigned input_len = strlen(input);

  unsigned input_idx = 0;
  unsigned token = inverted_index_dump_s_recognize(dump.data,
      input,&input_idx,input_len);

  cassert(token == 136);
  cassert(input_idx == 12);
}/*}}}*/

void test_fa_states_recognize()
{/*{{{*/
  CONT_INIT_CLEAR(parser_fa_s,fa);
  string_array_s reg_exps = {3,3,(string_s[]){
    STRING_S("\"Ahoj\""),
    STRING_S("\"Hello\""),
    STRING_S("\"Bonjour\""),
  }};

  cassert(parser_fa_s_create(&fa,&reg_exps) == 0);

  char *input = "BonjourHelloAhojBonjourHelloAhoj";
  unsigned input_len = strlen(input);

  CONT_INIT_CLEAR(ui_array_s,terminals);

  unsigned input_idx = 0;
  do {
    unsigned terminal = fa_states_s_recognize(&fa.fa.states,input,&input_idx,input_len);
    if (terminal == c_idx_not_exist) { break; }
    ui_array_s_push(&terminals,terminal);
  } while(1);

  ui_array_s reference = {6,6,(unsigned[]){2,1,0,2,1,0}};
  cassert(ui_array_s_compare(&terminals,&reference));
}/*}}}*/

void test_fa_states_dot_code()
{/*{{{*/
  CONT_INIT_CLEAR(file_s,file);
  cassert(file_s_open(&file,"tests/libparser_cll_test/resources/fa_states.dot","r") == 0);

  CONT_INIT_CLEAR(bc_array_s,reference);
  cassert(file_s_read_close(&file,&reference) == 0);

  CONT_INIT_CLEAR(parser_fa_s,fa);
  string_array_s reg_exps = {5,5,(string_s[]){
    STRING_S("\"Ahoj\""),
    STRING_S("\"Hello\""),
    STRING_S("\"Bonjour\""),
    STRING_S("\"Bon appetit\""),
    STRING_S("\"Bon\"*"),
  }};

  cassert(parser_fa_s_create(&fa,&reg_exps) == 0);

  CONT_INIT_CLEAR(bc_array_s,buffer);
  fa_states_s_to_dot_code(&fa.fa.states,&buffer);

  cassert(bc_array_s_compare(&buffer,&reference));
}/*}}}*/

void test_parser_create()
{/*{{{*/
  CONT_INIT_CLEAR(file_s,file);
  cassert(file_s_open(&file,"tests/libparser_cll_test/resources/uclang_parser.rules","r") == 0);

  CONT_INIT_CLEAR(bc_array_s,rules);
  cassert(file_s_read_close(&file,&rules) == 0);

  cassert(file_s_open(&file,"tests/libparser_cll_test/resources/uclang_parser.src","r") == 0);

  CONT_INIT_CLEAR(bc_array_s,source);
  cassert(file_s_read_close(&file,&source) == 0);

  CONT_INIT_CLEAR(parser_s,parser);
  cassert(parser_s_create_from_rule_char_ptr(&parser,rules.used,rules.data) == 1);

  CONT_INIT_CLEAR(ui_array_s,reduce_actions);

  // - initialize lalr parser stack -
  CONT_INIT_CLEAR(lalr_stack_s,lalr_stack);
  lalr_stack_s_push_state_all(&lalr_stack,0,0,0);

  // - variables describing state of lexical automata -
  unsigned old_input_idx = 0;
  unsigned input_idx = 0;
  unsigned ret_term = c_idx_not_exist;
  unsigned parse_action;

  do
  {
    // - recognize next terminal symbol -
    while (ret_term == c_idx_not_exist)
    {
      old_input_idx = input_idx;

      ret_term = finite_automata_s_recognize(&parser.final_automata,source.data,&input_idx,source.used);

      // - ERROR -
      cassert(ret_term != c_idx_not_exist)

      if (ui_array_s_get_idx(&parser.skip_terminals,ret_term) != c_idx_not_exist)
      {
        ret_term = c_idx_not_exist;
      }
    }

    // - select parse action from parse action table -
    parse_action = *p_lalr_table_s_value(&parser.lalr_table,ret_term,lalr_stack_s_last(&lalr_stack)->lalr_state);

    // - ERROR -
    cassert(parse_action != c_idx_not_exist);

    // - action SHIFT -
    if (parse_action < c_lalr_table_reduce_base)
    {
      // - if end terminal was received terminate parsing process -
      if (ret_term == parser.end_terminal)
      {
        break;
      }

      // - insert new parse state and location of terminal to parse stack -
      lalr_stack_s_push_state_all(&lalr_stack,parse_action,old_input_idx,input_idx);

      ret_term = c_idx_not_exist;
    }

    // - action REDUCE -
    else
    {
      parse_action -= c_lalr_table_reduce_base;

      // - store parse action -
      ui_array_s_push(&reduce_actions,parse_action);

      p_rule_descr_s *rule_descr = p_rule_descrs_s_at(&parser.rule_descrs,parse_action);

      // - retrieve nonterminal start and end -
      unsigned nonterm_start = lalr_stack_s_at(&lalr_stack,lalr_stack.used - rule_descr->body_size)->terminal_start;
      unsigned nonterm_end = lalr_stack_s_last(&lalr_stack)->terminal_end;

      lalr_stack.used -= rule_descr->body_size;

      unsigned goto_val = *p_lalr_table_s_value(&parser.lalr_table,rule_descr->head,lalr_stack_s_last(&lalr_stack)->lalr_state);
      lalr_stack_s_push_state_all(&lalr_stack,goto_val,nonterm_start,nonterm_end);
    }
  }
  while(1);

  // - reference reduce actions -
  ui_array_s reference = {1081,1081,(unsigned[]){
    6,6,17,17,16,15,15,10,16,10,16,10,14,9,20,19,28,30,21,
    19,43,48,47,44,53,190,189,187,133,129,151,133,127,151,133,
    127,151,133,127,126,123,119,111,108,96,95,86,55,52,42,37,
    34,33,33,32,31,27,26,25,25,18,8,7,13,9,17,17,16,15,15,
    12,20,19,28,17,17,16,15,15,29,21,19,43,48,47,44,53,151,
    133,129,126,123,119,111,108,16,164,155,170,168,153,133,129,
    126,123,119,111,108,97,96,95,87,55,151,133,129,126,123,119,
    111,108,17,17,16,15,15,164,155,170,190,189,187,133,129,126,
    123,119,111,108,96,172,190,189,187,133,129,126,123,119,111,
    108,96,171,169,153,133,129,126,123,119,111,108,97,96,95,87,
    54,151,133,129,126,123,119,111,108,17,17,16,15,164,163,149,
    149,147,145,144,142,133,129,126,123,119,111,108,97,96,95,87,
    54,151,173,165,173,170,190,189,187,133,129,126,123,119,111,
    108,96,172,169,167,133,129,126,123,119,111,108,96,95,87,54,
    151,133,129,126,123,119,111,108,91,184,133,129,126,123,119,
    111,108,96,93,184,133,129,126,123,119,111,108,96,92,184,133,
    129,126,123,119,111,108,96,92,184,133,129,126,123,119,111,
    108,96,92,184,133,129,126,123,119,111,108,96,92,90,88,133,
    129,126,123,119,111,108,97,96,95,87,54,74,73,151,133,129,
    126,123,119,111,108,96,72,57,56,71,54,74,73,151,133,129,
    126,123,119,111,108,96,72,57,56,71,54,151,133,129,126,123,
    119,111,108,16,164,155,170,91,184,133,129,126,123,119,111,
    108,96,93,184,133,129,126,123,119,111,108,96,92,184,133,129,
    126,123,119,111,108,96,92,184,133,129,126,123,119,111,108,
    96,92,184,133,129,126,123,119,111,108,96,92,90,88,133,129,
    126,123,119,111,108,96,172,169,153,133,129,126,123,119,111,
    108,97,96,95,87,54,184,133,129,126,123,119,151,133,129,126,
    123,118,111,108,96,94,59,190,189,187,133,151,158,132,129,
    126,123,119,111,108,150,173,170,168,167,133,129,126,123,119,
    111,108,96,95,87,55,58,56,65,64,54,175,177,184,133,129,126,
    123,119,111,108,96,95,86,174,173,170,91,89,88,133,129,126,
    123,119,111,108,96,172,169,167,133,129,126,123,119,111,108,
    96,95,87,54,175,48,47,176,184,133,129,126,123,119,111,108,
    96,95,86,174,173,170,91,184,133,129,126,123,119,111,108,96,
    93,90,88,133,129,126,123,119,111,108,96,172,169,167,133,129,
    126,123,119,111,108,96,95,87,54,151,133,129,126,123,119,111,
    108,175,48,47,176,184,133,151,130,129,126,123,119,111,108,
    96,95,86,174,133,129,126,123,119,111,108,97,96,95,87,54,
    151,133,129,126,123,119,111,108,175,48,47,176,59,184,133,
    129,126,123,119,111,108,96,95,86,55,58,56,174,133,129,126,
    123,119,111,108,97,96,95,87,54,151,133,129,126,123,119,111,
    108,175,48,47,48,46,176,59,151,133,129,126,123,119,111,108,
    183,133,129,126,123,119,111,108,97,96,95,87,55,68,151,133,
    129,126,123,119,151,133,129,126,123,114,111,108,96,94,59,
    151,133,129,126,123,119,111,108,151,133,129,126,123,119,111,
    108,98,96,95,87,55,151,136,133,129,126,123,119,111,108,96,
    95,87,54,58,56,67,54,58,56,174,133,129,126,123,119,111,108,
    97,96,95,87,54,74,73,16,164,155,170,183,133,129,126,123,
    119,111,108,96,172,184,133,129,126,123,119,111,108,96,171,
    184,133,129,126,123,119,111,108,96,171,169,153,133,129,126,
    123,119,111,108,96,72,57,56,71,54,151,133,129,126,123,119,
    111,108,190,189,190,188,190,188,187,133,129,126,123,119,111,
    108,97,96,95,87,54,151,133,129,126,123,119,111,108,184,133,
    129,126,123,119,111,108,184,133,129,126,123,119,111,108,96,
    183,133,129,126,123,119,111,108,96,160,97,96,95,87,54,183,
    133,129,126,123,119,111,108,183,133,129,126,123,119,111,108,
    183,133,129,126,123,119,111,108,183,133,129,126,123,119,111,
    108,96,162,96,161,150,133,129,126,123,119,111,108,183,133,
    129,126,123,119,111,108,184,133,129,126,123,119,111,108,96,
    161,96,162,96,161,96,95,87,54,151,133,129,126,123,119,111,
    108,184,133,129,126,123,119,111,108,97,96,95,87,54,190,189,
    187,133,151,133,129,184,133,127,126,123,119,111,108,150,158,
    132,129,126,123,119,111,108,150,173,170,168,167,133,129,126,
    123,119,111,108,96,95,87,54,190,189,187,133,151,158,132,129,
    126,123,119,111,108,150,173,170,168,167,133,129,126,123,119,
    111,108,96,95,87,54,151,133,129,126,123,119,111,108,182,133,
    129,126,123,182,133,129,126,120,119,111,108,97,96,95,87,54,
    52,42,37,34,33,33,32,31,27,26,25,25,18,8,13,11,8,7,13,9,
    8,5,4,4,3}};

  cassert(ui_array_s_compare(&reference,&reduce_actions));
}/*}}}*/

// === program entry function ==================================================

int main(int argc,char **argv)
{/*{{{*/
  (void)argc;
  (void)argv;

  EXECUTE_TESTS(,);

  return 0;
}/*}}}*/

